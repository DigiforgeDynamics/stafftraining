<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DF Dynamics Training Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <header>
        <h1>Welcome to DF Dynamics Training Portal</h1>
    </header>

    <main>
        <!-- Course Dropdown Section -->
        <section id="courses">
            <h2>Select a Course</h2>
            <div class="dropdown">
                <button class="dropbtn">Courses</button>
                <div class="dropdown-content">
                    <div class="course">
                        <button onclick="toggleLessons('course1')">â–¶ Welcome to DF Dynamics</button>
                        <div id="course1" class="lessons" style="display:none;">
                            <button onclick="showVideo('Introduction', 'lesson1')">Introduction</button>
                        </div>
                    </div>
                    
                    <div class="course">
                        <button onclick="toggleLessons('course2')">â–¶ Prompting Methods</button>
                        <div id="course2" class="lessons" style="display:none;">
                            <button onclick="showVideo('Prompt Basics', 'lesson2')">Prompt Basics</button>
                            <button onclick="showVideo('Advanced Prompting', 'lesson3')">Advanced Prompting</button>
                        </div>
                    </div>
                    
                    <div class="course">
                        <button onclick="toggleLessons('course3')">â–¶ Text Editor Setup</button>
                        <div id="course3" class="lessons" style="display:none;">
                            <button onclick="showVideo('Installing Editor', 'lesson4')">Installing Editor</button>
                            <button onclick="showVideo('Customization', 'lesson5')">Customization</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Video Section -->
        <section id="videoContainer" style="display:none;">
            <h2 id="videoTitle"></h2>
            <iframe id="videoFrame" width="560" height="315" allowfullscreen></iframe>
        </section>

        <!-- Certificate Section -->
        <section id="certificateContainer" style="display:none;">
            <h2>ðŸŽ‰ Congratulations!</h2>
            <p>You have completed all lessons and quizzes!</p>
            <button onclick="generateCertificate()">Download Certificate</button>
        </section>
    </main>

    <script>
        function toggleLessons(courseId) {
            let course = document.getElementById(courseId);
            course.style.display = (course.style.display === "block") ? "none" : "block";
        }

        function getVideoUrl(lessonId) {
            const videoLinks = {
                "lesson1": "https://www.youtube.com/watch?v=LHaGDT6Pdbk&list=RDw0nyEoXBEiA&index=3&ab_channel=ThinkMusicIndia",
                "lesson2": "https://www.youtube.com/embed/YOUR_VIDEO_ID2",
                "lesson3": "https://www.youtube.com/embed/YOUR_VIDEO_ID3",
                "lesson4": "https://www.youtube.com/embed/YOUR_VIDEO_ID4",
                "lesson5": "https://www.youtube.com/embed/YOUR_VIDEO_ID5"
            };
            return videoLinks[lessonId] || "";
        }

        function showVideo(title, lessonId) {
            document.getElementById("videoTitle").innerText = title;
            document.getElementById("videoFrame").src = getVideoUrl(lessonId);
            document.getElementById("videoContainer").style.display = "block";
        }

        function generateCertificate() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFont("helvetica", "bold");
            doc.setFontSize(22);
            doc.text("Certificate of Completion", 105, 40, null, null, "center");
            const employeeName = localStorage.getItem("loggedInEmployee") || "Employee";
            doc.setFont("helvetica", "normal");
            doc.setFontSize(16);
            doc.text(`This certifies that`, 105, 60, null, null, "center");
            doc.setFont("helvetica", "bold");
            doc.setFontSize(18);
            doc.text(`${employeeName}`, 105, 80, null, null, "center");
            doc.text("has completed DF Dynamics Training.", 105, 100, null, null, "center");
            const date = new Date().toLocaleDateString();
            doc.text(`Date: ${date}`, 105, 130, null, null, "center");
            doc.text("DF Dynamics Training Team", 105, 160, null, null, "center");
            doc.save(`Certificate_${employeeName}.pdf`);
        }
    </script>

    <!-- Quiz Section -->
<section id="quizContainer" style="display:none;">
    <h2 id="quizTitle"></h2>
    <div id="quizQuestions"></div>
    <button onclick="submitQuiz()">Submit Quiz</button>
</section>

<script>
    let progress = JSON.parse(localStorage.getItem("employeeProgress")) || {};
    let currentLesson = "";

    const quizzes = {
        "lesson1": {
            title: "Introduction Quiz",
            questions: [
                { question: "What is DF Dynamics?", options: ["A company", "A game", "A movie"], answer: 0 },
                { question: "What do you learn here?", options: ["Hacking", "Training", "Cooking"], answer: 1 }
            ]
        },
        "lesson2": {
            title: "Prompt Basics Quiz",
            questions: [
                { question: "What is a prompt?", options: ["A command", "A file", "A password"], answer: 0 },
                { question: "Where do we use prompts?", options: ["Food industry", "AI & Programming", "Farming"], answer: 1 }
            ]
        }
    };

    function showQuiz(lessonId) {
        if (!quizzes[lessonId]) return;
        currentLesson = lessonId;
        document.getElementById("quizTitle").innerText = quizzes[lessonId].title;
        const quizDiv = document.getElementById("quizQuestions");
        quizDiv.innerHTML = "";

        quizzes[lessonId].questions.forEach((q, i) => {
            let html = `<p>${q.question}</p>`;
            q.options.forEach((option, index) => {
                html += `<input type="radio" name="q${i}" value="${index}"> ${option}<br>`;
            });
            quizDiv.innerHTML += html;
        });

        document.getElementById("videoContainer").style.display = "none";
        document.getElementById("quizContainer").style.display = "block";
    }

    function submitQuiz() {
        const questions = quizzes[currentLesson].questions;
        let correct = 0;

        questions.forEach((q, i) => {
            const selected = document.querySelector(`input[name="q${i}"]:checked`);
            if (selected && parseInt(selected.value) === q.answer) {
                correct++;
            }
        });

        if (correct === questions.length) {
            alert("âœ… Quiz Passed!");
            progress[currentLesson] = true;
            localStorage.setItem("employeeProgress", JSON.stringify(progress));
            checkCompletion();
        } else {
            alert("âŒ Some answers are incorrect. Try again.");
        }
    }

    function checkCompletion() {
        const allLessons = Object.keys(quizzes);
        const completed = allLessons.every(lesson => progress[lesson]);
        
        if (completed) {
            document.getElementById("certificateContainer").style.display = "block";
        }
    }
</script>

</body>
</html>
